upstream snackbox {  
   server web:3000;
} 

server {  
   #server_name www.to-be-added.com;
   root   $RAILS_ROOT/public;  
   index  index.html;  
   access_log $RAILS_ROOT/log/nginx.access.log;  
   error_log $RAILS_ROOT/log/nginx.error.log;   

   location / {    
      try_files $uri @rails;  
   }      location @rails {    
      proxy_set_header  X-Real-IP  $remote_addr;    
      proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;               
      proxy_set_header Host $http_host;    
      proxy_pass http://snackbox;  
   }
}